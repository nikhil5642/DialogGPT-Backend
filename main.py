import requests
from bs4 import BeautifulSoup
from urllib.parse import urlparse, urljoin

from DataBase.MongoDB import getChatBotsCollection
from server.fastApi.modules.databaseManagement import getContentMappingList
from src.DataBaseConstants import CHATBOT_ID, CONTENT_LIST, USER_ID
from src.training.train_model import getDocumentsList

import datetime

if __name__ == "__main__":
    uid="G2pJbmdftsc0uj5ZH2IguWggh4z1"
    botID="e0de187e-10d5-4f02-a0c8-dd25b922d557"
    # print(getChatBotsCollection().find_one({USER_ID: uid, CHATBOT_ID: botID})[CONTENT_LIST] or [])
    getDocumentsList([{'content_id': '1d427c97-7848-49f9-a0a3-0d874ac65f4d', 'source': 'https://www.google.com', 'source_type': 'url', 'char_count': 272, 'last_updated': datetime.datetime(2023, 8, 18, 18, 38, 35, 738000), 'status': 'untrained'}, {'content_id': '9b63f23a-5aa1-4976-ab04-5d90bf2b8ef7', 'source': 'https://www.dreamkidsdeals.com', 'source_type': 'url', 'char_count': 1930, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '09e71d15-7fff-47f2-8a46-32b62f1c1357', 'source': 'https://www.dreamkidsdeals.com#MainContent', 'source_type': 'url', 'char_count': 1930, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': 'a4eb8721-e82e-414e-8f3d-8f49a14ffd7d', 'source': 'https://www.dreamkidsdeals.com/', 'source_type': 'url', 'char_count': 1930, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '28bad8df-8b2b-4b11-81f0-155547b9cdb2', 'source': 'https://www.dreamkidsdeals.com/collections/decorations', 'source_type': 'url', 'char_count': 2030, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '9e3345aa-6757-4c6d-8e3d-9004429126e8', 'source': 'https://www.dreamkidsdeals.com/collections/games', 'source_type': 'url', 'char_count': 1743, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': 'aedaf6b8-066e-4ed1-8814-6c725ab2fb0e', 'source': 'https://www.dreamkidsdeals.com/collections/toys', 'source_type': 'url', 'char_count': 1993, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': 'e33ca4dd-35b6-4d74-856a-03465ca97509', 'source': 'https://www.dreamkidsdeals.com/collections/utilities', 'source_type': 'url', 'char_count': 2064, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '86a64c40-2735-4940-9182-15a397b8f518', 'source': 'https://www.dreamkidsdeals.com/pages/contact-us', 'source_type': 'url', 'char_count': 997, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '2cfed0e4-f866-42b0-9048-8589d840e78e', 'source': 'https://www.dreamkidsdeals.com/pages/frequently-asked-questions', 'source_type': 'url', 'char_count': 861, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '1c194ce2-08da-4b9a-9e41-8bea44a84875', 'source': 'https://www.dreamkidsdeals.com/pages/shipping-and-handling', 'source_type': 'url', 'char_count': 1769, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '9d0eac6f-7c36-4fbf-bf92-412aa13216b5', 'source': 'https://dreamkidsdeals.com/apps/parcelpanel', 'source_type': 'url', 'char_count': 694, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '5f345853-0180-4310-bec5-1c6c70b0dee9', 'source': 'https://www.dreamkidsdeals.com/cart', 'source_type': 'url', 'char_count': 847, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '6826c250-d253-400b-99a3-6e366c62343e', 'source': 'https://www.dreamkidsdeals.com/collections/all', 'source_type': 'url', 'char_count': 2979, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': 'e7eaf33f-2c72-4f4f-8a78-0c0ced14c779', 'source': 'https://www.dreamkidsdeals.com/products/elephant-doll-pillow', 'source_type': 'url', 'char_count': 2631, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '0a79d789-d77c-4ea0-a572-b469daa68864', 'source': 'https://www.dreamkidsdeals.com/products/baby-waist-stool', 'source_type': 'url', 'char_count': 2153, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '6628010c-1871-44d0-bdf5-a410741f5952', 'source': 'https://www.dreamkidsdeals.com/products/magnetic-building-blocks', 'source_type': 'url', 'char_count': 1720, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}, {'content_id': '426a7c4c-ec55-4c77-b4e1-7d10e4cdf027', 'source': 'https://www.dreamkidsdeals.com/products/universal-spill-proof-bowl', 'source_type': 'url', 'char_count': 2652, 'last_updated': datetime.datetime(2023, 8, 18, 20, 36, 18, 122000), 'status': 'untrained'}])

